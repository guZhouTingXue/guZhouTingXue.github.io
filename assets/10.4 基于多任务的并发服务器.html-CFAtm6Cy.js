import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as A,a as i,f as k,d as e,w as a,r,o as g,e as s}from"./app-D7TihOFE.js";const B="/assets/10.4%20%E5%9F%BA%E4%BA%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%9A%84%E5%B9%B6%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8-BapcODO3.webp",c="/assets/10.4%20%E5%9F%BA%E4%BA%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%9A%84%E5%B9%B6%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8-1-LYfr0rB0.webp",y="/assets/10.4%20%E5%9F%BA%E4%BA%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%9A%84%E5%B9%B6%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8-2-JAGLK23U.webp",F={};function o(u,l){const d=r("Mermaid"),t=r("Tabs");return g(),A("div",null,[l[10]||(l[10]=i("h1",{id:"_10-4-基于多任务的并发服务器",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#_10-4-基于多任务的并发服务器"},[i("span",null,"10.4 基于多任务的并发服务器")])],-1)),k(d,{code:"eJwrTi0sTc1LTnXJTEwvSszlUgCCgsSikszkzILEvBIF55zM1LwSQ4XEYoWn6xY969j+fPV6IwxVwalFZalFIEXP5vQ+7VoIVITDJAMUkwy5wMpgUrp2dlCjrBRerN/+bGPTi/3znvUtBStKTC7JLEssSYWqAIv55QP5RZnpGSUK+WlwrU87Zj/dvevp2gkv9s9+vqIbrBLqQpANUNuA6ib3Pt01BWIRWFFKKjZLsLnu2bS1T/c0kOc6mLte7J/ydPa893t6nndsg4gAuc+mbHuxteXZrgk4HITkIkMywysnNY1gcGEPCYxANMQSiNgcR3xwYTiOotACAPhANuk="}),l[11]||(l[11]=i("p",null,"实现：",-1)),k(t,{data:[{id:"参考"},{id:"我的"}]},{title0:a(({value:n,isActive:h})=>[...l[0]||(l[0]=[s("参考",-1)])]),title1:a(({value:n,isActive:h})=>[...l[1]||(l[1]=[s("我的",-1)])]),tab0:a(({value:n,isActive:h})=>[...l[2]||(l[2]=[i("div",{class:"language-cpp line-numbers-mode has-collapsed-lines collapsed","data-highlighter":"shiki","data-ext":"cpp",style:{"--vp-collapsed-lines":"15","--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro has-highlighted vp-code"},[i("code",{class:"language-cpp"},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"#include"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," <stdio.h>")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"#include"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," <stdlib.h>")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"#include"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," <string.h>")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"#include"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," <unistd.h>")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"#include"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," <signal.h>")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"#include"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," <sys/wait.h>")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"#include"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," <arpa/inet.h>")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"#include"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," <sys/socket.h>")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"#define"),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," BUF_SIZE"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," 30")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"void"),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," error_handling"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"char"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}}," *"),i("span",{style:{"--shiki-light":"#383A42","--shiki-light-font-style":"inherit","--shiki-dark":"#E06C75","--shiki-dark-font-style":"italic"}},"message"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"void"),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," read_childproc"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"int"),i("span",{style:{"--shiki-light":"#383A42","--shiki-light-font-style":"inherit","--shiki-dark":"#E06C75","--shiki-dark-font-style":"italic"}}," sig"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"int"),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," main"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"int"),i("span",{style:{"--shiki-light":"#383A42","--shiki-light-font-style":"inherit","--shiki-dark":"#E06C75","--shiki-dark-font-style":"italic"}}," argc"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"char"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}}," *"),i("span",{style:{"--shiki-light":"#383A42","--shiki-light-font-style":"inherit","--shiki-dark":"#E06C75","--shiki-dark-font-style":"italic"}},"argv"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"[])")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"	int"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," serv_sock, clnt_sock;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"	struct"),i("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}}," sockaddr_in"),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}}," serv_adr"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", clnt_adr;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"	")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"	pid_t"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," pid;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"	struct"),i("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}}," sigaction"),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}}," act"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"	socklen_t"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," adr_sz;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"	int"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," str_len, state;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"	char"),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}}," buf"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"[BUF_SIZE];")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"	if"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(argc"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"!="),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"2"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"		printf"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"Usage : '),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"%s"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," <port>"),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"\\n"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"argv"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"["),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"]);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"		exit"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"	}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"	act"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"sa_handler"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"read_childproc;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"	sigemptyset"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#56B6C2"}},"&"),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"act"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"sa_mask"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"	act"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"sa_flags"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"	state"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"sigaction"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(SIGCHLD, "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#56B6C2"}},"&"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"act, "),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"	serv_sock"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"socket"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(PF_INET, SOCK_STREAM, "),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"	memset"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#56B6C2"}},"&"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"serv_adr, "),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"sizeof"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(serv_adr));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"	serv_adr"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"sin_family"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"AF_INET;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"	serv_adr"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"sin_addr"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"s_addr"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"htonl"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(INADDR_ANY);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"	serv_adr"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"sin_port"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"htons"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"atoi"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"argv"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"["),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"]));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"	")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"	if"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"bind"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(serv_sock, ("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"struct"),i("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}}," sockaddr"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"*"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},") "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#56B6C2"}},"&"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"serv_adr, "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"sizeof"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(serv_adr))"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"==-"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"		error_handling"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"bind() error"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"	if"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"listen"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(serv_sock, "),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"5"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"==-"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"		error_handling"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"listen() error"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"	")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"	while"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"	{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"		adr_sz"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"=sizeof"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(clnt_adr);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"		clnt_sock"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"accept"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(serv_sock, ("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"struct"),i("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}}," sockaddr"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"*"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#56B6C2"}},"&"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"clnt_adr, "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#56B6C2"}},"&"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"adr_sz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"		if"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(clnt_sock"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"==-"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"			continue"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"		else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"			puts"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"new client connected..."'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"		pid"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"fork"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"		if"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(pid"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"==-"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"		{")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"			close"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(clnt_sock);")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"			continue"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"		}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"		if"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(pid"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"=="),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"		{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"			close"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(serv_sock);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"			while"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"((str_len"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"read"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(clnt_sock, buf, BUF_SIZE))"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"!="),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"				write"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(clnt_sock, buf, str_len);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"			")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"			close"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(clnt_sock);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"			puts"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"client disconnected..."'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"			return"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," 0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"		}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"		else")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"			close"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(clnt_sock);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"	}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"	close"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(serv_sock);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"	return"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," 0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"void"),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," read_childproc"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"int"),i("span",{style:{"--shiki-light":"#383A42","--shiki-light-font-style":"inherit","--shiki-dark":"#E06C75","--shiki-dark-font-style":"italic"}}," sig"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"	pid_t"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," pid;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"	int"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," status;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"	pid"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"waitpid"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"-"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#56B6C2"}},"&"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"status, WNOHANG);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"	printf"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"removed proc id: '),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"%d"),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}}," \\n"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", pid);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"void"),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," error_handling"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"char"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}}," *"),i("span",{style:{"--shiki-light":"#383A42","--shiki-light-font-style":"inherit","--shiki-dark":"#E06C75","--shiki-dark-font-style":"italic"}},"message"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"	fputs"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(message, stderr);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"	fputc"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"'"),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"\\n"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"'"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", stderr);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"	exit"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"}")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})]),i("div",{class:"collapsed-lines"})],-1),i("p",null,"效果：",-1),i("div",{class:"language- line-numbers-mode","data-highlighter":"shiki","data-ext":"",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",{class:"language-"},[i("span",{class:"line"},[i("span",null,"new client connected...")]),s(`
`),i("span",{class:"line"},[i("span",null,"new client connected...")]),s(`
`),i("span",{class:"line"},[i("span",null,"client disconnected...")]),s(`
`),i("span",{class:"line"},[i("span",null,"removed proc id: 2928")]),s(`
`),i("span",{class:"line"},[i("span",null,"client disconnected...")]),s(`
`),i("span",{class:"line"},[i("span",null,"removed proc id: 2929")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1)])]),tab1:a(({value:n,isActive:h})=>[...l[3]||(l[3]=[i("div",{class:"language-cpp line-numbers-mode has-collapsed-lines collapsed","data-highlighter":"shiki","data-ext":"cpp",style:{"--vp-collapsed-lines":"15","--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro has-highlighted vp-code"},[i("code",{class:"language-cpp"},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"void"),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," closeProcess"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"int"),i("span",{style:{"--shiki-light":"#383A42","--shiki-light-font-style":"inherit","--shiki-dark":"#E06C75","--shiki-dark-font-style":"italic"}}," sig"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    int"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," status;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    pid_t"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," pid "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," waitpid"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"-"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#56B6C2"}},"&"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"status, "),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    if"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(pid "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},">"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," 0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"        printf"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"Child process '),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"%d"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," terminated."),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"\\n"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", pid);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    else"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}}," if"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(pid "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"=="),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}}," -"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"        unix_error"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"waitpid error"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"int"),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," main"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"int"),i("span",{style:{"--shiki-light":"#383A42","--shiki-light-font-style":"inherit","--shiki-dark":"#E06C75","--shiki-dark-font-style":"italic"}}," argc"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"char*"),i("span",{style:{"--shiki-light":"#383A42","--shiki-light-font-style":"inherit","--shiki-dark":"#E06C75","--shiki-dark-font-style":"italic"}}," argv"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"[])")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    if"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(argc"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"!="),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"3"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"){")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"        printf"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"Usage : '),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"%s"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," <IP> <port>"),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"\\n"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"argv"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"["),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"]);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"        exit"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    struct"),i("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}}," sigaction"),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}}," act"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"    act"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"sa_handler"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}}," ="),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," closeProcess;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"    sigemptyset"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#56B6C2"}},"&"),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"act"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"sa_mask"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"    act"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"sa_flags"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}}," ="),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," 0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"    printf"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"sigaction: '),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"%d"),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"\\n"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"sigaction"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(SIGCHLD, "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#56B6C2"}},"&"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"act, "),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    int"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," sock;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    struct"),i("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}}," sockaddr_in"),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}}," serv_addr"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},";   ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    char"),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}}," message"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"[BUF_SIZE];")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    int"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," str_len;        ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"    sock "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," socket"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(PF_INET, SOCK_STREAM, "),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    if"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(sock"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"==-"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"        error_handling"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"socket() error"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");   ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"    memset"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#56B6C2"}},"&"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"serv_addr, "),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"sizeof"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(serv_addr));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"    serv_addr"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"sin_family"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"AF_INET;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"    serv_addr"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"sin_addr"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"s_addr"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"inet_addr"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"argv"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"["),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"]);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"    serv_addr"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"sin_port"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"htons"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"atoi"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"argv"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"["),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"2"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"]));      ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"    ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    if"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"bind"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(sock, ("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"struct"),i("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}}," sockaddr"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"*"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#56B6C2"}},"&"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"serv_addr, "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"sizeof"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(serv_addr))"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"==-"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"        error_handling"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"bind() error"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"); ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"    ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    if"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"listen"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(sock, "),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"5"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"==-"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"        error_handling"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"listen() error"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    while"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"        int"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," clnt_sock;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"        struct"),i("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}}," sockaddr_in"),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}}," clnt_addr"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"        socklen_t"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," clnt_addr_size"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"=sizeof"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(clnt_addr);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"        clnt_sock"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"accept"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(sock, ("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"struct"),i("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}}," sockaddr"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"*"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#56B6C2"}},"&"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"clnt_addr, "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#56B6C2"}},"&"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"clnt_addr_size);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"        if"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(clnt_sock"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"==-"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"            error_handling"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"accept() error"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"        else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"            printf"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"New client connected addr:'),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"%s"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},", port:"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"%d"),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"\\n"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"inet_ntoa"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"clnt_addr"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"sin_addr"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"), "),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"ntohs"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E5C07B"}},"clnt_addr"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"sin_port"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"	    pid_t"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," pid;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"        pid "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," fork"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"        if"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(pid "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"=="),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}}," -"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"            unix_error"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"fork error"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"        else"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}}," if"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(pid "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"=="),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," 0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},") {"),i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}}," // Child process")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"            while"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"((str_len"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"="),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"read"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(clnt_sock, message, BUF_SIZE))"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"!="),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"                write"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(clnt_sock, message, str_len);"),i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}}," // Echo back")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"            close"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(clnt_sock);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"            printf"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"Client disconnected...'),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"\\n"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"            return"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," 0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},";"),i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}}," // Terminate child process")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"        else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"            printf"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"child pid: '),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"%d"),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}}," \\n"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", pid);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"    close"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(sock);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"    ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    return"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," 0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"}")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})]),i("div",{class:"collapsed-lines"})],-1),i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"行号"),i("th",null,"功能"),i("th",null,"说明")])]),i("tbody",null,[i("tr",null,[i("td",null,"1-11"),i("td",null,"子进程结束处理"),i("td",null,"waitpid中的第3个参数，参考为WNOHANG，这里在信号处理中回收子进程，那么子进程应该是已经结束了的。所以是否hang 应该没有影响吧？")]),i("tr",null,[i("td",null,"20-24"),i("td",null,"设置信号处理"),i("td")]),i("tr",null,[i("td",null,"26-36"),i("td",null,"创建并设置服务端socket参数"),i("td")]),i("tr",null,[i("td",null,"38、39"),i("td",null,"bind"),i("td")]),i("tr",null,[i("td",null,"41、42"),i("td",null,"listen"),i("td")]),i("tr",null,[i("td",null,"46-53"),i("td",null,"接收客户端连接请求"),i("td")]),i("tr",null,[i("td",null,"55-59"),i("td",null,"创建子进程"),i("td")]),i("tr",null,[i("td"),i("td",null,"在子进程中对客户端进行通讯"),i("td",null,"子进程中断开连接后关闭socket，并return")])])],-1),i("p",null,[s("打开多个网络助手，同时连接到服务端"),i("br"),s(" 效果：")],-1),i("div",{class:"language- line-numbers-mode","data-highlighter":"shiki","data-ext":"",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",{class:"language-"},[i("span",{class:"line"},[i("span",null,"sigaction: 0")]),s(`
`),i("span",{class:"line"},[i("span",null,"New client connected addr:192.168.56.1, port:13411")]),s(`
`),i("span",{class:"line"},[i("span",null,"child pid: 2957")]),s(`
`),i("span",{class:"line"},[i("span",null,"New client connected addr:192.168.56.1, port:13412")]),s(`
`),i("span",{class:"line"},[i("span",null,"child pid: 2958")]),s(`
`),i("span",{class:"line"},[i("span",null,"Client disconnected...")]),s(`
`),i("span",{class:"line"},[i("span",null,"Child process 2957 terminated.")]),s(`
`),i("span",{class:"line"},[i("span",null,"accept() error Interrupted system call //[!code highlight]")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1),i("p",null,[s("能够同时连接多个客户端，但是客户端关闭的时候会accept会报错"),i("br"),s(" 父进程在等待连接请求时被中断打断。")],-1),i("p",null,[s("在参考代码中，如果accept报错，可能是因为信号处理导致的中断，再次进行accept。"),i("br"),i("span",{style:{background:"#fff88f"}},"问："),s("后面创建进程的阶段是不是也会被中断？所以fork出错时重新再接收？这里不应该直接销毁已经accept的请求吧，而是应该判断错误类型，如果是子进程销毁引起的中断，应该保留前面accept的socket，然后在中断结束后重新创建子进程。")],-1),i("p",null,"修改错误处理函数：",-1),i("div",{class:"language-cpp line-numbers-mode","data-highlighter":"shiki","data-ext":"cpp",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",{class:"language-cpp"},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"void"),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," error_handling"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"const"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}}," char"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}}," *"),i("span",{style:{"--shiki-light":"#383A42","--shiki-light-font-style":"inherit","--shiki-dark":"#E06C75","--shiki-dark-font-style":"italic"}},"message"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"    fputs"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(message, stderr);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"    fprintf"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(stderr, "),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'" '),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"%s"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"strerror"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(errno));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"    fputc"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"'"),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"\\n"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"'"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", stderr);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    if"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(errno "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"=="),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," EINTR)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"        return"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"        exit"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"}")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1),i("p",null,"修改后效果：",-1),i("div",{class:"language- line-numbers-mode","data-highlighter":"shiki","data-ext":"",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",{class:"language-"},[i("span",{class:"line"},[i("span",null,"sigaction: 0")]),s(`
`),i("span",{class:"line"},[i("span",null,"New client connected addr:192.168.56.1, port:2442")]),s(`
`),i("span",{class:"line"},[i("span",null,"child pid: 3119")]),s(`
`),i("span",{class:"line"},[i("span",null,"New client connected addr:192.168.56.1, port:2443")]),s(`
`),i("span",{class:"line"},[i("span",null,"child pid: 3120")]),s(`
`),i("span",{class:"line"},[i("span",null,"Client disconnected...")]),s(`
`),i("span",{class:"line"},[i("span",null,"Child process 3119 terminated.")]),s(`
`),i("span",{class:"line"},[i("span",null,"accept() error Interrupted system call")]),s(`
`),i("span",{class:"line"},[i("span",null,"Client disconnected...")]),s(`
`),i("span",{class:"line"},[i("span",null,"Child process 3120 terminated.")]),s(`
`),i("span",{class:"line"},[i("span",null,"accept() error Interrupted system call")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1)])]),_:1}),l[12]||(l[12]=e(`<h2 id="通过fork函数复制文件描述符" tabindex="-1"><a class="header-anchor" href="#通过fork函数复制文件描述符"><span>通过fork函数复制文件描述符</span></a></h2><div class="hint-container info"><p class="hint-container-title">相关信息</p><p>从严格意义上说，套接字属于操作系统-只是进程拥有代表相应套接字的文件描述符。</p></div><h3 id="查看打开的文件" tabindex="-1"><a class="header-anchor" href="#查看打开的文件"><span>查看打开的文件</span></a></h3><p>使用 <em><strong>lsof</strong></em> - list open file命令查看当前已打开的文件<br> 参考：<a href="https://www.geeksforgeeks.org/linux-unix/lsof-command-in-linux-with-examples/" target="_blank" rel="noopener noreferrer">lsof Command in Linux with Examples - GeeksforGeeks</a></p><p>运行程序，使用 <code>ps au</code> 查看进程的pid，然后再使用 <code>lsof -p &lt;pid&gt;</code>查看进程打开的文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span></span></span>
<span class="line"><span>COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF   NODE NAME</span></span>
<span class="line"><span>Network 3216 ming  cwd    DIR   0,44     4096     19 /media/sf_share/Network/build</span></span>
<span class="line"><span>Network 3216 ming  rtd    DIR    8,1     4096      2 /</span></span>
<span class="line"><span>Network 3216 ming  txt    REG   0,44    14160    318 /media/sf_share/Network/build/Network</span></span>
<span class="line"><span>Network 3216 ming  mem    REG    8,1  1868984 398763 /lib/x86_64-linux-gnu/libc-2.23.so</span></span>
<span class="line"><span>Network 3216 ming  mem    REG    8,1   162632 398755 /lib/x86_64-linux-gnu/ld-2.23.so</span></span>
<span class="line"><span>Network 3216 ming    0u   CHR  136,8      0t0     11 /dev/pts/8</span></span>
<span class="line"><span>Network 3216 ming    1u   CHR  136,8      0t0     11 /dev/pts/8</span></span>
<span class="line"><span>Network 3216 ming    2u   CHR  136,8      0t0     11 /dev/pts/8</span></span>
<span class="line"><span>Network 3216 ming    3u  IPv4  33459      0t0    TCP 192.168.56.101:10086 (LISTEN)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>参数</th><th>值</th><th>用途</th><th>说明</th></tr></thead><tbody><tr><td>FD</td><td><strong>cwd</strong> current working directory;<br><strong>rtd</strong> root directory;<br><strong>txt</strong> program text (code and data);<br><strong>mem</strong> memory-mapped file;<br><strong>u</strong> for read and write access;</td><td>is the File Descriptor number of the file or</td><td></td></tr><tr><td>TYPE</td><td><strong>DIR</strong> for a directory;<br><strong>REG</strong> for a regular file;<br><strong>CHR</strong> for a character special file;<br><strong>IPV4</strong> for an IPv4 socket;</td><td>is the type of the node associated with the file</td><td></td></tr><tr><td>DEVICE</td><td></td><td></td><td></td></tr><tr><td>SIZE/OFF</td><td><code>0t0</code>、4096</td><td>is the size of the file or the file offset in bytes.</td><td>the offset is normally displayed in decimal with a leading <code>0t</code> if it contains 8 digits or less; in hexadecimal with a leading <code>0x</code> if it is longer than 8 digits.</td></tr><tr><td>NODE</td><td></td><td>is the node number of a local file;<br>or the inode number of an NFS file in the server host;<br>or the Internet protocol type - e.g, \`TCP&#39;; 。。。</td><td></td></tr></tbody></table><p><span style="background:#fff88f;">问：</span>为什么socket的NODE值显式为TCP？socket应该也是有NODE值得，如何查看其NODE？</p><p>这里可以看到服务端得监视socket<br> 连接一个客户端后再次查看进程打开的文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>Network 3216 ming    2u   CHR  136,8      0t0     11 /dev/pts/8</span></span>
<span class="line"><span>Network 3216 ming    3u  IPv4  33459      0t0    TCP 192.168.56.101:10086 (LISTEN)</span></span>
<span class="line"><span>Network 3216 ming    4u  IPv4  33460      0t0    TCP 192.168.56.101:10086-&gt;192.168.56.1:1600 (ESTABLISHED)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>打开的文件新增了一个 <code>ESTABLISHED</code> 的 socket，这里服务端的socket 指向 客户端的socket</p><p>查看子进程打开的文件：</p><ol><li>查看pid为3241</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ming</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      3216</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   4356</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   784</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/8</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    S+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   05:14</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./Network</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.56.101</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10086</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ming</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      3241</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   4356</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    80</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/8</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    S+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   05:45</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./Network</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.56.101</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10086</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>lsof</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>ming@ubuntu:~$ lsof -p 3241</span></span>
<span class="line"><span>COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF   NODE NAME</span></span>
<span class="line"><span>Network 3241 ming  cwd    DIR   0,44     4096     19 /media/sf_share/Network/build</span></span>
<span class="line"><span>Network 3241 ming  rtd    DIR    8,1     4096      2 /</span></span>
<span class="line"><span>Network 3241 ming  txt    REG   0,44    14160    318 /media/sf_share/Network/build/Network</span></span>
<span class="line"><span>Network 3241 ming  mem    REG    8,1  1868984 398763 /lib/x86_64-linux-gnu/libc-2.23.so</span></span>
<span class="line"><span>Network 3241 ming  mem    REG    8,1   162632 398755 /lib/x86_64-linux-gnu/ld-2.23.so</span></span>
<span class="line"><span>Network 3241 ming    0u   CHR  136,8      0t0     11 /dev/pts/8</span></span>
<span class="line"><span>Network 3241 ming    1u   CHR  136,8      0t0     11 /dev/pts/8</span></span>
<span class="line"><span>Network 3241 ming    2u   CHR  136,8      0t0     11 /dev/pts/8</span></span>
<span class="line"><span>Network 3241 ming    3u  IPv4  33459      0t0    TCP 192.168.56.101:10086 (LISTEN)</span></span>
<span class="line"><span>Network 3241 ming    4u  IPv4  33460      0t0    TCP 192.168.56.101:10086-&gt;192.168.56.1:1600 (ESTABLISHED)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到子进程打开的文件和父进程的一模一样，区别在于 他们的<strong>PID</strong> 不同。</p><h2 id="fork的过程" tabindex="-1"><a class="header-anchor" href="#fork的过程"><span>fork的过程</span></a></h2>`,18)),k(t,{data:[{id:"初始"},{id:"建立连接"},{id:"创建子进程"}]},{title0:a(({value:n,isActive:h})=>[...l[4]||(l[4]=[s("初始",-1)])]),title1:a(({value:n,isActive:h})=>[...l[5]||(l[5]=[s("建立连接",-1)])]),title2:a(({value:n,isActive:h})=>[...l[6]||(l[6]=[s("创建子进程",-1)])]),tab0:a(({value:n,isActive:h})=>[...l[7]||(l[7]=[i("figure",null,[i("img",{src:B,alt:"|399x124",tabindex:"0",loading:"lazy"}),i("figcaption",null,"|399x124")],-1)])]),tab1:a(({value:n,isActive:h})=>[...l[8]||(l[8]=[i("figure",null,[i("img",{src:c,alt:"|400x215",tabindex:"0",loading:"lazy"}),i("figcaption",null,"|400x215")],-1)])]),tab2:a(({value:n,isActive:h})=>[...l[9]||(l[9]=[i("figure",null,[i("img",{src:y,alt:"|394x257",tabindex:"0",loading:"lazy"}),i("figcaption",null,"|394x257")],-1)])]),_:1}),l[13]||(l[13]=e(`<p>在创建子进程后，没有系统socket都关联到两个文件描述符，“只有2个文件描述符都终止（销毁）-close后，才能销毁套接字。</p><p>所以需要创建子进程后，子进程中只保留 和 accept 时和客户端建立连接的socket，而父进程中只保留监听socket。子进程销毁时只需销毁连接socket，父进程销毁时销毁监听socket。</p><p>在上面我的代码中并没有在主进程中关闭clntsocket，客户端断开连接后查看socket 状态：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ming@ubuntu:~$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lsof</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">COMMAND</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> USER</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   FD</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   TYPE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DEVICE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SIZE/OFF</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> NODE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> NAME</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Network</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3216</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ming</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    3u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  IPv4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  33459</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      0t0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  TCP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.56.101:10086</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (LISTEN)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Network</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3216</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ming</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    4u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  IPv4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  33460</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      0t0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  TCP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.56.101:10086</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">192.168.56.1:1600</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (CLOSE_WAIT)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到 连接到56.1：1600 的socket 没有被关闭，状态为 <code>CLOSE_WAIT</code></p><p><strong>更新代码</strong></p><div class="language-cpp line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="cpp" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro has-highlighted vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        else</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(pid </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // Child process</span></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sock);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((str_len</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">read</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(clnt_sock, message, BUF_SIZE))</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                write</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(clnt_sock, message, str_len);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // Echo back</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(clnt_sock);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            printf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Client disconnected...</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // Terminate child process</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        else</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(clnt_sock);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // Parent process closes client socket</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            printf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;child pid: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%d</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, pid);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>效果：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>ming@ubuntu:~$ lsof -i</span></span>
<span class="line"><span>COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span></span>
<span class="line"><span>Network 3297 ming    3u  IPv4  34812      0t0  TCP 192.168.56.101:10086 (LISTEN)</span></span>
<span class="line"><span>Network 3298 ming    4u  IPv4  34813      0t0  TCP 192.168.56.101:10086-&gt;192.168.56.1:3818 (ESTABLISHED)</span></span>
<span class="line"><span>ming@ubuntu:~$ lsof -i</span></span>
<span class="line"><span>COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span></span>
<span class="line"><span>Network 3297 ming    3u  IPv4  34812      0t0  TCP 192.168.56.101:10086 (LISTEN)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>客户端断开连接后clntsock 正常销毁</p>`,10))])}const b=p(F,[["render",o]]),D=JSON.parse('{"path":"/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/10.4%20%E5%9F%BA%E4%BA%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%9A%84%E5%B9%B6%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8.html","title":"10.4 基于多任务的并发服务器","lang":"zh-CN","frontmatter":{"category":"网络编程","description":"10.4 基于多任务的并发服务器 实现： 通过fork函数复制文件描述符 相关信息 从严格意义上说，套接字属于操作系统-只是进程拥有代表相应套接字的文件描述符。 查看打开的文件 使用 lsof - list open file命令查看当前已打开的文件 参考：lsof Command in Linux with Examples - GeeksforGe...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"10.4 基于多任务的并发服务器\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-16T16:51:23.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"mingStudent\\"}]}"],["meta",{"property":"og:url","content":"https://guzhoutingxue.github.io/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/10.4%20%E5%9F%BA%E4%BA%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%9A%84%E5%B9%B6%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8.html"}],["meta",{"property":"og:title","content":"10.4 基于多任务的并发服务器"}],["meta",{"property":"og:description","content":"10.4 基于多任务的并发服务器 实现： 通过fork函数复制文件描述符 相关信息 从严格意义上说，套接字属于操作系统-只是进程拥有代表相应套接字的文件描述符。 查看打开的文件 使用 lsof - list open file命令查看当前已打开的文件 参考：lsof Command in Linux with Examples - GeeksforGe..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-16T16:51:23.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-16T16:51:23.000Z"}]]},"git":{"createdTime":1765903883000,"updatedTime":1765903883000,"contributors":[{"name":"guZhouTingXue","username":"guZhouTingXue","email":"2422173022@qq.com","commits":1,"url":"https://github.com/guZhouTingXue"}]},"readingTime":{"minutes":7.19,"words":2156},"filePathRelative":"网络编程/10.4 基于多任务的并发服务器.md","excerpt":"","autoDesc":true}');export{b as comp,D as data};
