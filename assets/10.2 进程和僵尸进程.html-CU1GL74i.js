import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,d as n,a as s,e as a,f as h,w as p,r as k,o as d}from"./app-y4S3ecjE.js";const r={};function g(A,i){const l=k("font");return d(),t("div",null,[i[12]||(i[12]=n(`<h1 id="_10-2-进程和僵尸进程" tabindex="-1"><a class="header-anchor" href="#_10-2-进程和僵尸进程"><span>10.2 进程和僵尸进程</span></a></h1><p>修改10.1的程序，增加子进程pid的打印，以及创建子进程后父进程sleep<br> 实现：</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        printf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Parent Process: pid = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, i = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%d</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, pid, i);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        sleep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">30</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>效果：<br> 程序输出：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>Parent Process: pid = 2144, i = 2</span></span>
<span class="line"><span>Child Process: i = 5</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>使用另一个终端查看进程状态<br> 或 在运行程序后添加 &amp; 参数让程序后台运行：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>ming      2143  0.0  0.0   4352   676 pts/8    S+   01:44   0:00 ./Network</span></span>
<span class="line"><span>ming      2144  0.0  0.0      0     0 pts/8    Z+   01:44   0:00 [Network] &lt;defunct&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>子进程的pid是2144，COMMAND中显示为 [Network] &lt;defunct&gt; 不再使用</p><p>虽然子进程已经返回了，但是父进程还在，操作系统不会自动销毁子进程。子进程占用的资源也不会释放。<br> 子进程的终止方式：</p><ol><li><p>main函数中执行return语句并返回值<br><span style="background:#fff88f;">问：</span>这里说明的是main函数执行结束，那如果在子进程中创建进程（孙子进程）。现在有3辈人：爷、父、孙，父终止的时候孙会跟着终止吗？换句话说，这里main 返回是独指main，还是指main代表的父进程？</p></li><li><p>传递参数并调用exit函数<br> 由父进程显式要求回收子进程，获取子进程的返回状态并终止子进程，回收子进程占用的资源。</p></li></ol><h2 id="回收子进程" tabindex="-1"><a class="header-anchor" href="#回收子进程"><span>回收子进程</span></a></h2><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">NAME</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       wait, waitpid, waitid </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> wait </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> process to change state</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SYNOPSIS</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">       #include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;sys/types.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">       #include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;sys/wait.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">       pid_t</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">status</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">       pid_t</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> waitpid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">pid_t</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> pid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">status</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,12)),s("table",null,[i[11]||(i[11]=s("thead",null,[s("tr",null,[s("th",null,"参数"),s("th",null,"值"),s("th",null,"用途"),s("th",null,"说明")])],-1)),s("tbody",null,[s("tr",null,[i[6]||(i[6]=s("td",null,[a("pid"),s("br")],-1)),i[7]||(i[7]=s("td",null,[a("< -1 meaning wait for any child process whose process group ID is equal to the absolute value of pid."),s("br"),a("-1 meaning wait for any child process."),s("br"),a("0 meaning wait for any child process whose process group ID is equal to that of the calling process."),s("br"),a(" > 0 meaning wait for the child whose process ID is equal to the value of pid.")],-1)),i[8]||(i[8]=s("td",null,"指定监视的process的范围",-1)),s("td",null,[i[1]||(i[1]=a("-1: 任何子进程；",-1)),i[2]||(i[2]=s("br",null,null,-1)),i[3]||(i[3]=a("group ID：一组关联的进程，父子进程属于一个进程组",-1)),i[4]||(i[4]=s("br",null,null,-1)),h(l,{color:"#ffff00"},{default:p(()=>[...i[0]||(i[0]=[a("问： ",-1)])]),_:1}),i[5]||(i[5]=a("什么情况下需要指定group ID？",-1))])]),i[9]||(i[9]=s("tr",null,[s("td",null,"status"),s("td",null,[a("WIFEXITED(status)：子进程是否正常退出（使用exit 或 从main 返回）"),s("br"),a(" WEXITSTATUS(status)： returns the exit status of the child. "),s("br"),s("br"),a("WIFSIGNALED:returns true if the child process was terminated by a signal.")]),s("td",null,"存储回收进程的状态信息"),s("td",null,"使用宏来获取status存储的具体信息")],-1)),i[10]||(i[10]=s("tr",null,[s("td",null,"option"),s("td",null,[a("WNOHANG return immediately if no child has exited."),s("br"),a("WUNTRACED also return if a child has stopped (but not traced via ptrace(2)). Status for traced children which have stopped is provided even if this option is not specified."),s("br")]),s("td",null,"控制回收的方式"),s("td",null,[a("WNOHANG：如果在调用wait时子进程的状态没有变化，wait会一直等待，直到有状态变化。如果wait前，子进程已经发生的变化（返回），wait会直接返回。设置该选项后，不管是否有变化，wait都直接返回。"),s("br"),a("WUNTRACED: 正常情况下，wait只返回已经终止的子进程。如果要获知停止状态的子进程，需要设置WUNTRACED。对于被traced的进程（调试时），无论是否设置WUNTRACED，都会返回。相当于默认被设置")])],-1))])]),i[13]||(i[13]=n(`<p>wait( ) &lt;=&gt; waitpid(-1, &amp;status, 0)<br><strong>查看进程组</strong><br> 命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -e</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --format</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pid,pgid,sid,ppid,comm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-e</td><td>every 所有的进程</td></tr><tr><td>--format</td><td>自定义ps输出的内容（格式）</td></tr><tr><td>pgid</td><td>process group ID or, equivalently, the process ID of the process group leader. (alias pgrp).</td></tr><tr><td>sid</td><td>session ID or, equivalently, the process ID of the session leader. session 就当作是所在的终端</td></tr><tr><td>ppid</td><td>parent process ID.</td></tr></tbody></table><p>输出：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>  PID  PGID   SID  PPID COMMAND      </span></span>
<span class="line"><span> ...</span></span>
<span class="line"><span> 1956  1956  1956   954 sshd</span></span>
<span class="line"><span> 2024  1956  1956  1956 sshd</span></span>
<span class="line"><span> 2026  2026  2026  2024 bash</span></span>
<span class="line"><span> 2036  2036  2036  2025 sftp-server</span></span>
<span class="line"><span> 2344     0     0     2 kworker/u2:2</span></span>
<span class="line"><span> 2370     0     0     2 kworker/u2:1</span></span>
<span class="line"><span> 2374     0     0     2 kworker/u2:0</span></span>
<span class="line"><span> 2401  2401  2026  2026 Network</span></span>
<span class="line"><span> 2402  2401  2026  2401 Network</span></span>
<span class="line"><span> 2403  2401  2026  2402 Network</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Network 是由 2026bash 创建的，所以其ppid是2026，而2026bash 是一个 terminal，所以其sid就是它本身。<br> 2401Network创建了2402，2402又创建了2403， 他们的PGID 是最先启动的2401.</p><p><strong>测试</strong></p><ol><li>调用wait 前子进程已经返回</li></ol><div class="language-cpp line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="cpp" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> argc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">char*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> argv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[])</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    pid_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> pid;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    pid </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> fork</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(pid </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">==</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        unix_error</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;fork error&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    else</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(pid </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // child process</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">+=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        printf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;child process: i = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%d</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, i);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // parent process</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        sleep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> status;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        printf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;before wait</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        waitpid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(pid, </span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">status, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        printf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ifexited: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, status: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, ifsignaled: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%d</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WIFEXITED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(status), </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WEXITSTATUS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(status), </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WIFSIGNALED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(status));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>输出：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>child process: i = 5</span></span>
<span class="line"><span>before wait</span></span>
<span class="line"><span>ifexited: 1, status: 5, ifsignaled: 0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>调用wait 时子进程还没有返回<br> 让子进程sleep<br> 输出：</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">before</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">child</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> process:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ifexited:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 5,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ifsignaled:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>等待直到子进程返回</p>`,14))])}const u=e(r,[["render",g]]),y=JSON.parse('{"path":"/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/10.2%20%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B.html","title":"10.2 进程和僵尸进程","lang":"zh-CN","frontmatter":{"category":"网络编程","description":"10.2 进程和僵尸进程 修改10.1的程序，增加子进程pid的打印，以及创建子进程后父进程sleep 实现： 效果： 程序输出： 使用另一个终端查看进程状态 或 在运行程序后添加 & 参数让程序后台运行： 子进程的pid是2144，COMMAND中显示为 [Network] <defunct> 不再使用 虽然子进程已经返回了，但是父进程还在，操作系统...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"10.2 进程和僵尸进程\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-11T17:56:24.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"mingStudent\\"}]}"],["meta",{"property":"og:url","content":"https://guzhoutingxue.github.io/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/10.2%20%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B.html"}],["meta",{"property":"og:title","content":"10.2 进程和僵尸进程"}],["meta",{"property":"og:description","content":"10.2 进程和僵尸进程 修改10.1的程序，增加子进程pid的打印，以及创建子进程后父进程sleep 实现： 效果： 程序输出： 使用另一个终端查看进程状态 或 在运行程序后添加 & 参数让程序后台运行： 子进程的pid是2144，COMMAND中显示为 [Network] <defunct> 不再使用 虽然子进程已经返回了，但是父进程还在，操作系统..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-11T17:56:24.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-11T17:56:24.000Z"}]]},"git":{"createdTime":1765475784000,"updatedTime":1765475784000,"contributors":[{"name":"guZhouTingXue","username":"guZhouTingXue","email":"2422173022@qq.com","commits":1,"url":"https://github.com/guZhouTingXue"}]},"readingTime":{"minutes":3.65,"words":1096},"filePathRelative":"网络编程/10.2 进程和僵尸进程.md","excerpt":"","autoDesc":true}');export{u as comp,y as data};
