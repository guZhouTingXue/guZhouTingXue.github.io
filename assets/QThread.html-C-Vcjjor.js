import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as i,b as t,d as l,o as e}from"./app-DHJi1G2m.js";const h="data:image/webp;base64,UklGRj4MAABXRUJQVlA4WAoAAAAgAAAAMQIATgEASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZWUDggUAoAANBfAJ0BKjICTwE+0WisUqgmpKKgl0l5ABoJaW7hdUoouLzVJ8bAzvQt/xunz6Jeew9EXQ0/9H2Gv6Z04HrA/5vJiPKv9g7cv9N4R+S/2znHY75+n7j15djPxSydbvLqHdT/2ngz6kfevyqeQz+k/4n2A/53/aPpm+Pr/s/1Hn0+s/YS/XX0t/Zx6LQZo06HN6CopkvA6B2vtKnRyQz3VMtO/FfTCFiRIDL+fWLZLxXPqwrkBmcfzDQ3cV7r/uN4JjuggV48cOUDm7gdmcgaJZmkZtE1bG6xLBluxPVqUQM36scrrVFFA1sWyDhUHVUiOWA8OQV9OKiJtD1f8iAlxzougpsmC0So2d6ZDm0CxZ2JA5zMetQoebb4z2zRsQNvkB+JTV7eQAkmlO+as4jHPNeTLuhZDG4S30VR683H1+ye3/1eBibKWqJFEuXCm3/RjTtw7lrw0mkYOk0t2H3mANd8IrozEGkZCltnZMkvkFtt4d0YGxpfILbbw7NeMNeBd3feF7wveF7wveF7wveF7jn5K9WQ8YgHoZtDNoZtDNoZr8bLmzXja8bXja8bXja8bXja2oEpiGbQzaGbQzaGbQy4u9XqpFDL9zmZzP8/Z9/KiWdrl8zkmNXr+ArxiAehm0M2hm0M15ZFifIcA2n4zM3S1xPDkHRx3snupOdSgGNHPKgbrpN6YYIB6GbQzaGbQzaGbvM5mIkHvT/l2vG142vG142vG142vG13/TwFeMQD0M2hm0M2hm0M2hmvxsubNeNrxteNrxteNrxteNrad6n/1/6cqiGhFamea8bXja8bXjagAiY228J0bi8niHBUmetMEZ6k5XEQQD0M2hm0M2hmyQGFSS+BA44FEAXvC94XvC94XvC94XvDDYqJJ9nr3he8L3he8L3he8L3fiaR/VkPGIB6GbQzaGbQzaGa/GxerIeMQD0M2hm0M2hm0M2e/mAxteNrxteNrxteNrxteNrad6oCHFwm+k2MVaxnaXCb6TYx8tLhN9JsY+Wlwm+k2MfLS2+wzUAA+U96q0CMlAU5PEyijJ03AoHcXAN3gGRr09It8PgC5uo0NloV7y2v2hHNpCmzOtn6pQFyx9o6boWl9w7TLw/oM5uIIQh+PoFz6q0SE4+5TKcBSy02h4jaK2uHyXnziNeMvpSHW9GXF2c34dWzSy1dIJGRvUUbgqzDqN8euU4nU9nxSYsZ5G677bPm6an57MxKkxpcooz11N5Rj7sBuKqqyOGZzIvIugWHrLIf2hQUo4kqDoYQiSkycTZM0Ig9zezt/oBPF2jFTmeuh0IjFilvmNRHjzld/Y5fbUE4efywnvl3NANIAFm5rZE+3xTv+Tf+Fy+/Abma9+BqIcjvLyZuP2jMPSbHmV/CXFzDiTc5V6yn6WRWYTvsrNZWaywv8U9CLuUB+VG85YL1iZzVrGQFloxoArRmhgsbKPHBUcD3n+Los6VkIflIhVaor72FGhgXJxtm7gz842x5KhWOfKj+Ff6belt+wXsluvbkqaJOpQlgRt7diSQfn9oyQDtt8Weca3/+jz31u84H0uX/mR1wZ4fJj5RZYB7exnOHzte8sNnPYsgENc1wTAOzW3CyFypM58XkVv1pnnKXLCqbT30K2Nc+9l1/Z6vaCWEVw6JFchePCHzhSKgtT6Z4CbB1XerPC+XOnri1iioAJM7KIsZtWuy7/RKpVOJC7Nx7segtv/E1OasFJS5g4zZ7QoI33qXxsgxpGpOR2uVjuAOKEYsicQDn88MXWvydRejcCqhwhPzIWoPuX+diRNaX1tvyEhO5Bg311hD5VR4EQUBGT4CKk7ENfaMGttNGUcnn6lJPr/hMNY0S4tQjhm6Mt3qmOPVgl7JsI4ggLOiuOAOTqz+GiqqG34A92Av9AP4eNGMnulQ4z2Zsmcyj6asTWuuxccYhm+T+7Z4Aq7qFRcdj3H5aiND+3bNug1MyVTb7L47k6nkLvfidvmmJoEh5Uyp7gPzmX813v6enCKTO1wm5IAmS+eBEM8KE129Lz08W7/hDQ8NKSxeHl9lYEXkgt5OEieq0z64+Is4iglMEYCUd/nrIVj0Toya8MWDKoQ0OqUn4psjfvxA+oVmX9I36SoomNuwgFKHB8452UCaTJUzl2y7xvsZxYqNyWkpYPRCYSCn+rJWJcsMCGjEE8gP+zpCv6cHE9SCjJGJyP7RIUe/jS1cewtH7X2+on9ZhitttoBiquWD7x8g+qaVTs/1oYaijoP1+HCpiv2swLgBkb3XTiZP+4io84wNlaDgB9duOYgv+OdbpaQY55EEW4qDQ1Oo0OnIvMzuR58p3H7KbqVFxF4we0ihnGow9dAOPokGUdLkcLbdWor6CQK7pAZALKDwoVWu6/LODW6ZtR2Qf5F/5/y20caYndZLhdMP/y6JZdG1vwalHMAukdbD0yiNNPGbQ5O+OVrDQ0XMLlXdhZymqvilni1DntY9b3jvwDNtGpFOEmZEchXrZKr0izLFgzsOrU0MVuahE4wOvDtuP906NHxXDj6QHdrcEuyDImtRGpiiyaO3rhRtSanpCIYrNx/241TlwCHoshssqiuV56sltSw0Ve2M8cp0slfkYUjh9gp23Gcay9aBVqfaOc80zcga3GopVK4WqruH00MJfVkMiT4lJ9NIq9q57rKTmgm/F2cZCVdyCA/edz1UxvwzqP3z1/D3LrNdYHcNULLWuectU295U5zQp48BRVlRIO1eURawREs7TyqWVv4mQDVaAr+qOsiy5lvtBC5PK9prVITN+3bWNAdvPDEkZxqROd3lFJSlve1ZXE9A+Q069+IQEMv98x1CD5G8JPQ+fh1wFBrW6jQYBxHtTAJ8fUXoOY56M4xsgAAEH+LHG9UEvuZAqNficNTP+6T/jdKod8kVMHYihx+DspOHqBQN1MypeE+L72T/Xb8mbQGHXAAAAAACLnKeHd+q4zdnnxFEnK/XVmBo3T+2InSYNf2lNmZ/OKyxMw4URRg7/ZOBxVo70YrdG0art7zQlhyT1SMVglCgh/LKAtG4U3SnXp+hjDIIc+65AaEzgrbwUnYrN+pyU7ey1DGXiWi6QpxYUL3//FazuyXUIEoSvwLMIr7UU8RBBTRvgigdxf94OVWoWfpxrbKBUou0b/SVe5oB4uVDcC7PpuGm4GAa93/1ZSSDY9btQGmouS5HypOy4QEYbhloZBLLHB4X5sU+uojJH3hDOi0GskXNqhYh6ZAHEekdMMNmnBjgAAAAAAAEMF0HCUoUkf2GR/RexPu1l++gvreFwYiIk1GlFCf1vC9z8OBcGQziMHFyGzLhXsP0WQ8Cd2yGBV034CuEM5riCNuTlXets1QA9zb5ti8WF6jiR+CffsLldEg9u6M+z3zkD1Yb2ihFa9gKjFiEyw1r2jK1mPMbyeSiuiBFlJOFiy2M0oRZPkfDaRZp2dJNar6DJAUAAAAAAAALGabuiYjAc0SNYTK8J0L+ctIaydZGRLlNem9cvK9h2oM4NaDNN9Auy6mMXpnwAAA==",k={};function p(A,s){return e(),n("div",null,[s[0]||(s[0]=i("h1",{id:"qthread",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#qthread"},[i("span",null,"QThread")])],-1)),s[1]||(s[1]=i("p",null,"The QThread class provides a platform-independent way to manage threads.",-1)),t(" more "),s[2]||(s[2]=l(`<h2 id="为什么要使用thread" tabindex="-1"><a class="header-anchor" href="#为什么要使用thread"><span>为什么要使用thread</span></a></h2><p>每个进程都是从一个线程开始，这个线程被称为主线程（在Qt 应用程序中被叫做GUI thread）。所有界面显示相关的控件都要运行在GUI thread中。如果在GUI thread 中执行耗时甚至阻塞的任务（方法）或者 执行sleep 会导致界面无法响应用户操作。</p><p>示例：点击按钮执行work，work执行过程中会进行sleep。执行完毕后反馈结果<br> 实现：</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="Work.h"><span>Work.h</span></div><div class="language-cpp line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="cpp" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Worker</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> QObject</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Q_OBJECT</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    explicit</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Worker</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">QObject</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">parent</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> nullptr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">public slots:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> doWork</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">		qDebug</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;begin do work thread:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> QThread::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentThreadId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        size_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, j </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            sleep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        qDebug</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;finish work&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        emit </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">resultReady</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ok&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">signals:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> resultReady</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> QString</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &amp;</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">signals:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div></div><div class="code-block-with-title"><div class="code-block-title-bar" data-title="mainwindow"><span>mainwindow</span></div><div class="language-cpp line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="cpp" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MainWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> QMainWindow</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Q_OBJECT</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	MainWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">QWidget</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">parent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    : </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">QMainWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(parent)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    , </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ui</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Ui::MainWindow)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">	    ui</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setupUi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">		qDebug</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;MainWindow threadid:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> QThread::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentThreadId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	    connect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">MainWindow::operate, </span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">m_worker, </span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Worker::doWork);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	    connect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">m_worker, </span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Worker::resultReady, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">MainWindow::handleResults);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">private slots:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> on_pushButton_clicked</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() { emit </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">operate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(); }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handleResults</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> QString</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &amp;</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">ui</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">lineEdit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setText</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(result); }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">signals:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> operate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div></div><table><thead><tr><th>行号</th><th>功能</th></tr></thead><tbody><tr><td>11</td><td>执行work</td></tr><tr><td>12</td><td>获取work执行结果</td></tr><tr><td>15</td><td>点击work 按钮后执行work</td></tr><tr><td>16</td><td>显示work 执行结果</td></tr><tr><td>在GUI thread 连接信号-槽 和 直接调用没有区别</td><td></td></tr></tbody></table><p>效果：<br><img src="`+h+`" alt="|354x211" loading="lazy"></p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="output"><span>output</span></div><div class="language-txt line-numbers-mode" data-highlighter="shiki" data-ext="txt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-txt"><span class="line"><span>MainWindow threadid: 0x76d8</span></span>
<span class="line"><span>begin do work thread: 0x76d8</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></div><pre><code>线程id相同，在同一线程中执行。
</code></pre><h2 id="使用movetothread" tabindex="-1"><a class="header-anchor" href="#使用movetothread"><span>使用moveToThread</span></a></h2><blockquote><p>Changes the thread affinity for this object and its children and returns true on success. The object cannot be moved if it has a parent. Event processing will continue in the targetThread.</p></blockquote><p>只有Qobject 的子类可以通过moveToThread 移动方法到指定线程中</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="mainwindow"><span>mainwindow</span></div><div class="language-cpp line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="cpp" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MainWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> QMainWindow</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Q_OBJECT</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    QThread m_workerThread;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	MainWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">QWidget</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">parent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    : </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">QMainWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(parent)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    , </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ui</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Ui::MainWindow)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">	    ui</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setupUi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	    resize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">800</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">400</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">	    m_worker</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">moveToThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">m_workerThread);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	    connect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">MainWindow::operate, </span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">m_worker, </span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Worker::doWork);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	    connect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">m_worker, </span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Worker::resultReady, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">MainWindow::handleResults);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">	    m_workerThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //... same as before</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div></div><table><thead><tr><th>行号</th><th>功能</th><th>说明</th></tr></thead><tbody><tr><td>13</td><td>将worker移动到workerThread中</td><td>workerThread 维护一个event loop，所有在该线程中的对象的槽函数都会在该线程中执行。所有信号均由该线程发射</td></tr><tr><td>16</td><td>启动workerThread</td><td>如果线程没有启动，那么worker 的 slots 仍在GUI线程中执行</td></tr></tbody></table><h2 id="线程退出" tabindex="-1"><a class="header-anchor" href="#线程退出"><span>线程退出</span></a></h2><p>如果GUI thread 退出的时候，启动的子线程仍在执行会报以下错误：</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="output"><span>output</span></div><div class="language-txt line-numbers-mode" data-highlighter="shiki" data-ext="txt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-txt"><span class="line"><span>QThread: Destroyed while thread is still running</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></div><p>需要主动结束子线程</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">     ~</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Controller</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">         workerThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">quit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">         workerThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>行号</th><th>功能</th><th>说明</th></tr></thead><tbody><tr><td>2</td><td>退出thread 的事件循环</td><td>不再响应非当前线程的信号？</td></tr><tr><td>3</td><td>等待thread 执行完成</td><td>默认是一直等待</td></tr></tbody></table><h2 id="关联文章" tabindex="-1"><a class="header-anchor" href="#关联文章"><span>关联文章</span></a></h2><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" disabled="disabled"><label class="task-list-item-label" for="task-item-0"> Threading Basic</label></li></ul>`,22))])}const B=a(k,[["render",p]]),g=JSON.parse('{"path":"/Widget/QThread.html","title":"QThread","lang":"zh-CN","frontmatter":{"category":"Widget","tags":["Thread","Qt"],"description":"The QThread class provides a platform-independent way to manage threads.","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"QThread\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-08-24T15:40:41.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"mingStudent\\"}]}"],["meta",{"property":"og:url","content":"https://guzhoutingxue.github.io/Widget/QThread.html"}],["meta",{"property":"og:title","content":"QThread"}],["meta",{"property":"og:description","content":"The QThread class provides a platform-independent way to manage threads."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-24T15:40:41.000Z"}],["meta",{"property":"article:tag","content":"Qt"}],["meta",{"property":"article:tag","content":"Thread"}],["meta",{"property":"article:modified_time","content":"2025-08-24T15:40:41.000Z"}]]},"git":{"createdTime":1756050041000,"updatedTime":1756050041000,"contributors":[{"name":"guZhouTingXue","username":"guZhouTingXue","email":"2422173022@qq.com","commits":1,"url":"https://github.com/guZhouTingXue"}]},"readingTime":{"minutes":2.05,"words":615},"filePathRelative":"Widget/QThread.md","excerpt":"\\n<p>The QThread class provides a platform-independent way to manage threads.</p>\\n","autoDesc":true}');export{B as comp,g as data};
