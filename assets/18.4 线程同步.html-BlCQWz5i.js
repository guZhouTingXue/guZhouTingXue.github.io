import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,d as a,f as n,a as t,r as h,o as p}from"./app-y4S3ecjE.js";const k={};function d(r,s){const i=h("Mermaid");return p(),e("div",null,[s[0]||(s[0]=a('<h1 id="_18-4-çº¿ç¨‹åŒæ­¥" tabindex="-1"><a class="header-anchor" href="#_18-4-çº¿ç¨‹åŒæ­¥"><span>18.4 çº¿ç¨‹åŒæ­¥</span></a></h1><div class="hint-container info"><p class="hint-container-title">ç›¸å…³ä¿¡æ¯</p><p>çº¿ç¨‹åŒæ­¥ç”¨äºè§£å†³çº¿ç¨‹è®¿é—®é¡ºåºå¼•å‘çš„é—®é¢˜ã€‚</p></div><h2 id="äº’æ–¥é‡-mutual-exclusion" tabindex="-1"><a class="header-anchor" href="#äº’æ–¥é‡-mutual-exclusion"><span>äº’æ–¥é‡ Mutual Exclusion</span></a></h2><p>ç›¸äº’æ’æ–¥<br> ä¹Ÿå«åšäº’æ–¥é”<br> äº’æ–¥é”çš„ä½œç”¨ï¼šä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè®¿é—®åŒä¸€å—ä¸´ç•ŒåŒºï¼ˆé€ æˆå¼‚å¸¸çš„ä»£ç ï¼‰</p>',4)),n(i,{code:"eJxLzkksLnbJTEwvSszlUgACsIBCbmlJakU1WAAECkoyilITU+LBwvGZeZklGmCmjkJiSUmRpkJmXgkOtSmpxSVF+ZUQ5fgU5uQnZxNWVZqHTV0tFwC9vkGN"}),s[1]||(s[1]=t("p",null,"ä½¿ç”¨mutexçš„é€»è¾‘ï¼š",-1)),n(i,{code:"eJyVk09LAkEUwO9+isceoiDBvYqJh06du0nIbLukpKvoioHboYPgv0OHsiCjIkgJMpAw08gv4/PPqa/Q7Btd100Q5zLDe/Pe+80P5iTNUlE43PcAX4msoZ2F8pkoS2l+fjR2Ic4ULe6XUkY0rTE1QjciMT1mUAEW77Dfw68OFu+xUcFqTTqnRCariM6GLyyNe4Nxs+KTjihlrXjy+JQnlrtawe0tOu8Alh+nVxeOkgNfKA+CDNQYSyR1dU4H0uj2HS9fRvWSGIX15qQ1mN60ht2P8XUVq73f7we7U2AvCKIAP9vDbtmaAwLbWiwsuYodFFl9JboI2/CTxvMyPBWB1xvkz6DNHLWfOC4WOsN+TUC7hkJASXPO+qsgNIFR4QyAOmu66nHZlue2Zdd0ntjItrzW9szcQpyyXtw/inXicvw9byX8KaxUKgultJkcyQTFIUl2vIZucG4TcovedFexVdo/gOKGcDzzTaGc5w9TxDqL"}),s[2]||(s[2]=a(`<ul><li>åœ¨è®¿é—®ä¸´ç•ŒåŒºå‰è¿›è¡Œlockï¼Œè®¿é—®ç»“æŸåè¿›è¡Œunlockã€‚</li><li>å¦‚æœçº¿ç¨‹0è®¿é—®åæ²¡æœ‰unlockï¼Œé‚£ä¹ˆçº¿ç¨‹1ä¼šä¸€ç›´ç­‰å¾…è§£é”ï¼Œé€ æˆçº¿ç¨‹1æ— æ³•è®¿é—®ä¸´ç•ŒåŒº - æ­»é”ã€‚</li><li>å¤šä¸ªçº¿ç¨‹ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªmutexï¼Œé€šè¿‡è¯¥mutexçš„çŠ¶æ€åˆ¤æ–­ä¸´ç•ŒåŒºçš„è®¿é—®æƒ…å†µã€‚</li></ul><h2 id="æŸ¥çœ‹mutexç›¸å…³å‡½æ•°å¸®åŠ©" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹mutexç›¸å…³å‡½æ•°å¸®åŠ©"><span>æŸ¥çœ‹mutexç›¸å…³å‡½æ•°å¸®åŠ©</span></a></h2><ol><li>æŸ¥è¯¢pthread_mutex_init çš„å¸®åŠ©ï¼Œæç¤ºmanual ä¸­æ²¡æœ‰å¯¹åº”entryçš„ä¿¡æ¯ã€‚</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mingstudent@mingstudent:/mnt/c/Users/mingstudent/Desktop$ man pthread_mutex_init</span></span>
<span class="line"><span>No manual entry for pthread_mutex_init</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…POSIX å¼€å‘æ‰‹å†Œ</li></ol><div class="language-cmd line-numbers-mode" data-highlighter="shiki" data-ext="cmd" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cmd"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sudo apt install </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">manpages</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">posix</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dev</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li>å®‰è£…æˆåŠŸåå†æ¬¡æŸ¥è¯¢</li></ol><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">PROLOG</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       This  manual  page  is  part of the POSIX Programmer</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;s Manual.  The Linux implementation of this interface may</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       differ (consult the corresponding Linux manual page for details of Linux behavior), or the interface  may  not</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       be implemented on Linux.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">NAME</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       pthread_mutex_init â€” destroy and initialize a mutex</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">SYNOPSIS</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       #include &lt;pthread.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       int pthread_mutex_init(pthread_mutex_t *restrict mutex,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           const pthread_mutexattr_t *restrict attr);</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>mutexçš„ç±»å‹ä¸ºï¼špthread_mutex_t<br> åˆ›å»ºä¸€ä¸ªmutexçš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">	pthread_mutex_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> mutex;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	pthread_mutex_init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mutex);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">	pthread_mutex_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> mutex </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> PTHREAD_MUTEX_INITIALIZER;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>1ã€2è¡Œï¼Œä½¿ç”¨å‡½æ•°è¿›è¡Œåˆå§‹åŒ–</li><li>ä½¿ç”¨å®è¿”å›çš„æ— å±æ€§é…ç½®ï¼ˆattr = NULLï¼‰çš„mutex<br><span style="background:#fff88f;">é—®ï¼š</span>è¿™ä¸ªå®å…·ä½“æ˜¯ä¸€ä¸ªå‡½æ•°è¿˜æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å€¼ï¼Ÿæ˜¯åœ¨ç¼–è¯‘æ—¶æœŸå®Œæˆ è¿˜æ˜¯ è¿è¡Œæ—¶å™¨ç”Ÿæˆï¼Ÿ</li></ul><blockquote><p>æ¨èä½¿ç”¨pthread_mutex_init å‡½æ•°è¿›è¡Œåˆå§‹åŒ–</p></blockquote><p>å› ä¸ºå¯ä»¥é€šè¿‡å‡½æ•°è¿”å›å€¼åˆ¤æ–­åˆå§‹åŒ–æ˜¯å¦æˆåŠŸ</p><h2 id="æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•"><span>æµ‹è¯•</span></a></h2><p>å®ç°ï¼š</p><div class="language-cpp line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="cpp" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">pthread_mutex_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> mutex;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void*</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> thread_inc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> arg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	long</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	pthread_mutex_lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mutex);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5000000000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		num</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	pthread_mutex_unlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mutex);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> argc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">char*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> argv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[])</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">	pthread_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tid0, tid1;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	pthread_mutex_init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mutex, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">	//ã€‚ã€‚ã€‚</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><table><thead><tr><th>è¡Œå·</th><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>å®šä¹‰ç”¨äºé”å®šä¸´ç•ŒåŒºçš„mutex</td><td>å…¨å±€å˜é‡ï¼Œå¤šçº¿ç¨‹å…±äº«</td></tr><tr><td>6ã€9</td><td>ç»™ä¸´ç•ŒåŒºä¸Šé”ã€è§£é”</td><td></td></tr><tr><td>15</td><td>ä½¿ç”¨mutexå‰åˆå§‹åŒ–mutex</td><td></td></tr></tbody></table><p>æ•ˆæœï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>ming@ubuntu:/media/sf_share/Network/build$ ./Network</span></span>
<span class="line"><span>num: 0</span></span>
<span class="line"><span>ming@ubuntu:/media/sf_share/Network/build$ ./Network</span></span>
<span class="line"><span>num: 0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŠ äº†é”ä¹‹åå¤šçº¿ç¨‹ä¸ä¼šåŒæ—¶ä¿®æ”¹å…¨å±€å˜é‡numï¼Œå¤šæ¬¡è¿è¡Œç»“æœæ­£ç¡®ã€‚</p><h3 id="ä¸´ç•ŒåŒºçš„èŒƒå›´" tabindex="-1"><a class="header-anchor" href="#ä¸´ç•ŒåŒºçš„èŒƒå›´"><span>ä¸´ç•ŒåŒºçš„èŒƒå›´</span></a></h3><ol><li>åªè¦åŒ…å«äº†å¯èƒ½å¼•èµ·é—®é¢˜çš„ä»£ç çš„åŒºåŸŸå°±å¯ä»¥æ˜¯ä¸´ç•ŒåŒº</li><li>=ã€‹ä¸´ç•ŒåŒºçš„èŒƒå›´å¯å¤§å¯å°</li></ol><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5000000000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		num</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯”å¦‚ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä¸´ç•ŒåŒºå¯ä»¥æ˜¯1ã€2 ä¸¤æ¡è¯­å¥ï¼Œä¹Ÿå¯ä»¥æ˜¯ç¬¬2è¡Œ - å•æ¡è¯­å¥ã€‚<br> åŠ é”çš„æ“ä½œå¯ä»¥æ˜¯å¯¹ forå¾ªç¯ å’Œ numæ“ä½œ ä¸€èµ·åŠ é”ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»…å¯¹numæ“ä½œåŠ é”</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5000000000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">		pthread_mutex_lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mutex);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		num</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">		pthread_mutex_unlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mutex);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸¤è€…çš„åŒºåˆ«ï¼š</p><table><thead><tr><th>æ–¹å¼</th><th>lockã€unlockæ¬¡æ•°</th><th>ç‰¹ç‚¹</th><th>æ—¶é—´</th></tr></thead><tbody><tr><td>for + num ï¼šå¾ªç¯å‰ååŠ é”ã€è§£é”</td><td>1</td><td>ç›¸å½“äºå…¶ä¸­ä¸€ä¸ªçº¿ç¨‹è¦å®Œå…¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œå¯¹numçš„æ“ä½œç„¶åæ‰å¯ä»¥è®¿é—®<br>â€æœ€å¤§é™åº¦å‡å°‘äº’æ–¥é‡lockã€unlockå‡½æ•°è°ƒç”¨çš„æ¬¡æ•°â€œï¼Œå¯¹äº’æ–¥é”çš„æ“ä½œä¹Ÿéœ€è¦è¿ç®—</td><td>beginï¼š1769273439 - 2026-01-25 00:50:39<br>end: 1769273462 - 2026-01-25 00:51:02<br>å…±ï¼š23s</td></tr><tr><td>numï¼šå¾ªç¯å†…</td><td>å¾ªç¯æ¬¡æ•°</td><td>ä¸¤ä¸ªçº¿ç¨‹äº¤æ›¿å¯¹numè¿›è¡Œæ“ä½œ</td><td>beginï¼š1769273575 - 2026-01-25 00:52:55<br>end: 1769273730 - 2026-01-25 00:55:30<br>å…±ï¼š155s</td></tr></tbody></table><p>ä¸¤ç§æ–¹å¼è¿è¡Œæ—¶é—´ç›¸å·®132sï¼Œå¯ä»¥çœ‹åˆ°å¦‚æœå¾ªç¯æ¬¡æ•°è¿‡å¤šï¼Œé¢‘ç¹lockã€unlock ä¸¥é‡å½±å“æ€§èƒ½ã€‚</p><p>å¢åŠ æ—¶é—´æˆ³æ‰“å°ï¼š</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">#include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&lt;time.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	time_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> now </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> time</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    printf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;begin time: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%ld</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">long</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)now);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>è¡Œå·</th><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>4</td><td>time() returns the time as the number of seconds since the Epoch, 1970-01-01 00:00:00 +0000 (UTC).</td><td>timeè¿”å›è·ç¦»Epochçš„ç§’æ•°</td></tr></tbody></table><p>ç”¨åœ¨çº¿å·¥å…·è½¬æ¢æˆæ—¶åˆ†ç§’æ ¼å¼</p><h2 id="ä¿¡å·é‡-semaphore" tabindex="-1"><a class="header-anchor" href="#ä¿¡å·é‡-semaphore"><span>ä¿¡å·é‡ semaphore</span></a></h2>`,33)),n(i,{code:"eJxLzkksLnbJTEwvSszlUgACsIBCcWpuYkFGflFqNVgQBIBC8Zl5mSUaQIaOQkFxRmJRaoqOQlliTmmqpkJmXgmKypTU4pKi/EqQYkzJgvxisDGYMuWJEAsQMrVcAHLGMW0="}),s[3]||(s[3]=a(`<h3 id="sem-init" tabindex="-1"><a class="header-anchor" href="#sem-init"><span>sem_init</span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">NAME</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       sem_init </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> initialize an unnamed semaphore</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SYNOPSIS</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">       #include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;semaphore.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">       int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> sem_init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">sem_t</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">sem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> pshared</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">unsigned</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>å‚æ•°</th><th>å€¼</th><th>ç”¨é€”</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>sem</td><td></td><td>sem_init() initializes the unnamed semaphore at the address pointed to by sem.</td><td>ä¿å­˜ä¿¡å·é‡çš„å˜é‡åœ°å€</td></tr><tr><td>pshared</td><td>0; nonzero</td><td>The pshared argument indicates whether this semaphore is to be shared between the threads of a process, or between processes.<br> If pshared has the value 0, then the semaphore is shared between the threads of a process, and should be located at some address that is visible to all threads <br>...</td><td>ä¿¡å·é‡æ˜¯åœ¨ä¸€ä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹ä¹‹é—´å…±äº«ï¼Œè¿˜æ˜¯åœ¨å¤šä¸ªè¿›ç¨‹ä¹‹é—´å…±äº«</td></tr><tr><td>value</td><td></td><td>The value argument specifies the initial value for the semaphore.</td><td>ä¿¡å·é‡çš„åˆå§‹å€¼</td></tr><tr><td>RETURN</td><td>0; -1</td><td>returns 0 on success; on error, -1 is returned, and errno is set to indicate the error.</td><td></td></tr></tbody></table><h3 id="sem-post" tabindex="-1"><a class="header-anchor" href="#sem-post"><span>sem_post</span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">NAME</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       sem_post </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> unlock a semaphore</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SYNOPSIS</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">       #include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;semaphore.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">       int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> sem_post</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">sem_t</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">sem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       Link with </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">pthread.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">DESCRIPTION</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">       sem_post</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()  </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">increments</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  (unlocks)  the  semaphore pointed to by </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">sem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.  </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">If</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> the semaphore&#39;s value consequently becomes greater than zero, then another process </span><span style="--shiki-light:#A626A4;--shiki-dark:#ABB2BF;">or</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread blocked in a </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sem_wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) call  will be woken up </span><span style="--shiki-light:#A626A4;--shiki-dark:#ABB2BF;">and</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> proceed to lock the semaphore.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä¿¡å·é‡æœ‰ä¸€ä¸ªåˆå§‹å€¼ï¼Œç±»å‹ä¸ºunsigned int ï¼ˆ &gt;= 0 ï¼‰</li><li>post å°† semaphore åŠ 1ï¼Œ wait å°† semaphore å‡1</li><li>ä¿¡å·é‡çš„å€¼ä¸èƒ½å°äº0</li><li>å¦‚æœå½“å‰sempahoreçš„å€¼æ˜¯0ï¼Œä½¿ç”¨poståï¼Œé˜»å¡åœ¨sem_waitï¼ˆï¼‰çš„çº¿ç¨‹ä¼šè¢«å”¤é†’ - æ‰§è¡Œï¼ŒåŒæ—¶semaphore è¢«lock</li></ul><h3 id="sem-wait" tabindex="-1"><a class="header-anchor" href="#sem-wait"><span>sem_wait</span></a></h3><div class="language-cpp line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="cpp" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">NAME</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       sem_wait, sem_timedwait, sem_trywait </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> lock a semaphore</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SYNOPSIS</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">       #include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;semaphore.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">       int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> sem_wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">sem_t</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">sem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">       int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> sem_trywait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">sem_t</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">sem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">       int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> sem_timedwait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">sem_t</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">sem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> struct</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> timespec</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">abs_timeout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       Link with </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">pthread.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       DESCRIPTION</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">       sem_wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()  </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">decrements</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  (locks) the semaphore pointed to by </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">sem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.  </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">If</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> the semaphore&#39;s value is greater than zero, then the decrement proceeds, </span><span style="--shiki-light:#A626A4;--shiki-dark:#ABB2BF;">and</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> the function returns, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">immediately</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.  </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">If</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> the semaphore currently has the value zero, then the  call blocks  until either it becomes possible to perform the </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">decrement</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">., the semaphore value rises above zero), </span><span style="--shiki-light:#A626A4;--shiki-dark:#ABB2BF;">or</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> a signal handler interrupts the call.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">       sem_trywait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() is the same as </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sem_wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), except that </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> the decrement cannot be immediately performed, then call  returns an </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (errno set to EAGAIN) instead of blocking.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>åˆ¤æ–­semaphoreçš„å€¼ æ˜¯å¦ ä¸ºæ­£ã€‚ å¦‚æœ ä¸ºæ­£ï¼ˆ&gt;0ï¼‰ï¼Œå°†semaphoreå‡1 å¹¶ ç«‹å³è¿”å›ï¼Œå¤„ç†ä¸´ç•ŒåŒºã€‚å¦‚æœ == 0 é˜»å¡ç­‰å¾…ç›´åˆ° semaphoreçš„å€¼ä¸º0</p><h3 id="ä½¿ç”¨semaphoreçš„è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨semaphoreçš„è¿‡ç¨‹"><span>ä½¿ç”¨semaphoreçš„è¿‡ç¨‹</span></a></h3>`,10)),n(i,{code:"eJxLL0osyFAIceFSAILMvMwSh+rijMSCVCuF5MyiZB2FnMSk1BwrBaXi1Nx4kLSGjoKOQlliTmmqplItWFOBQ7UCVEtRanIJQsuTHVueT+152rMLqLC4NAliU3liZkm0EohUigVrT0FoT8lMzEWx8fmslqcNe57NWP90wrInO3Y9W7v4/Z75UGtTUotxWQzUqaCrYAhTqKCra6dQAxK0UzCoAepTQBe3tQVKKKRwpealIFxakF8MdCmIhLo0My8Zn43aYBtBRsCCEmLB87WdT/e1PpvT+bR//fMpK15sbXm2a0INKARA8jVP9u5HiCoUgMVetnc9m7IPLgZ0AhcA5/yfCw=="}),s[4]||(s[4]=a(`<p>åœ¨ä¸´ç•ŒåŒºå‰è°ƒç”¨waitç­‰å¾…semaphoreçš„å€¼ &gt;0ï¼Œä½¿ç”¨å®Œä¸´ç•ŒåŒºåè°ƒç”¨postå¢åŠ semaphoreçš„å€¼</p><h3 id="å¯¹ä¿¡å·é‡çš„ç†è§£" tabindex="-1"><a class="header-anchor" href="#å¯¹ä¿¡å·é‡çš„ç†è§£"><span>å¯¹ä¿¡å·é‡çš„ç†è§£</span></a></h3><p>ä¿¡å·é‡çš„åˆå§‹å€¼å¯ä»¥çœ‹ä½œæ˜¯å¯ç”¨èµ„æºçš„æ•°é‡ã€‚</p><table><thead><tr><th>æƒ…æ™¯</th><th>mutex</th><th>semaphore</th></tr></thead><tbody><tr><td>å•æ‰€</td><td>å®¶é‡Œçš„å•æ‰€ï¼Œä¸€ä¸ªäººä½¿ç”¨å…¶ä½™äººç­‰å¾…</td><td>å…¬å…±å•æ‰€ï¼Œå¯ç”¨æœ‰å¤šä¸ªå°çš„éš”é—´ æˆ–è€… å‘ä½ğŸ˜</td></tr></tbody></table><p>å°†ä¸´ç•ŒåŒºçœ‹ä½œèµ„æºï¼Œæ¯æ¬¡ä½¿ç”¨å‰éƒ½éœ€è¦ç¡®è®¤æœ‰èµ„æºå¯ç”¨ã€‚<br> å½“semaphoreçš„æœ€å¤§å€¼ä¸º1æ—¶å’Œmutex æ˜¯ä¸€ä¸ªæ•ˆæœã€‚</p><h3 id="æµ‹è¯•-1" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•-1"><span>æµ‹è¯•</span></a></h3><p>å®ç°ï¼š</p><div class="language-cpp line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="cpp" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">sem_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sem;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void*</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> thread_inc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> arg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	long</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	sem_wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sem);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5000000000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		num</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	sem_post</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sem);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> argc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">char*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> argv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[])</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	sem_init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sem, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">	//ã€‚ã€‚ã€‚</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>æ•ˆæœï¼š<br> è€—æ—¶<br> beginï¼š1769345034 2026-01-25 20:43:54<br> endï¼š 1769345056 2026-01-25 20:44:16<br> å…±22s å’Œ ä½¿ç”¨mutexçš„æ•ˆç‡åŸºæœ¬ä¸€è‡´</p><h3 id="æŒ‡å®šè®¿é—®åŒä¸€å†…å­˜ç©ºé—´çš„çº¿ç¨‹æ‰§è¡Œé¡ºåº" tabindex="-1"><a class="header-anchor" href="#æŒ‡å®šè®¿é—®åŒä¸€å†…å­˜ç©ºé—´çš„çº¿ç¨‹æ‰§è¡Œé¡ºåº"><span>æŒ‡å®šè®¿é—®åŒä¸€å†…å­˜ç©ºé—´çš„çº¿ç¨‹æ‰§è¡Œé¡ºåº</span></a></h3><p>mutex å’Œ semaphore é™¤äº†å¯ä»¥é¿å…å¤šçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€å†…å­˜ç©ºé—´ï¼Œè¿˜å¯ä»¥æŒ‡å®šå¤šçº¿ç¨‹è®¿é—®çš„é¡ºåºã€‚<br> ä¹¦ä¸­çš„ç¤ºä¾‹ï¼š</p><blockquote><p>çº¿ç¨‹Aä»ç”¨æˆ·è¾“å…¥å¾—åˆ°å€¼åå­˜å…¥å…¨å±€å˜é‡numï¼Œæ­¤æ—¶çº¿ç¨‹Bå°†å–èµ°è¯¥å€¼å¹¶ç´¯åŠ ã€‚è¯¥è¿‡ç¨‹å…±è¿›è¡Œ5æ¬¡ï¼Œå®Œæˆåè¾“å‡ºæ€»å’Œå¹¶é€€å‡ºç¨‹åºã€‚</p></blockquote><p>çº¿ç¨‹Aã€Bçš„æ‰§è¡Œæœ‰å…ˆåé¡ºåºã€‚</p>`,13)),n(i,{code:"eJyVkstOwkAYhfc8xYSF0QQSunBjjFHjI7gjxhRotAYKKSXGWBMWYkARVEAMGrwkKDHhshIDBF6m03bHKzidf2gHV8qGdqZzvvOfMweqmDpEuzs+RH5pKbGvSmJs8xSlD8WUtIaiJ/EAiosRKb6G/M62hnC5Z4xa9qSCcy0kK7K2HEABJKz4z1yNqBj/i0T31erWPYmQI+FLZyLgSQuF/dZwarWvttB6RN1AdmmAy/cA9u9R2LEoayEPpUpRzWNZnQKe5IACQvCMu0WzV3PNUo3lpfnsKwAzv/J2tm4ML4BnNc7Np6ExbrApZSWV0TywrASTGR5dbZv5AbMKJ1LJNLXKJ+GsAZkkxsD4rYkvX/iECFvJJJjMETduTBYTHtN86OGbd2AS36vG96dZ68/Gz+ykSvK0p1X82OTDQ8HgBkxDn6hL+nQEfzru3xrDkqOmwwFmw9nV7ckE5/t0k+j7JCXGFyjMC9xmBdJxwCG+K3I2BC4YVhvcr3lBXkpsmoUrttj7b4yXP4/h78JsXITArdGHNeowNvW8WBO9IPMmHLV/NoGYF1VWtLBZqODrvpkdEZMQhSqEoSF49eJxwiYTuxXRBeIAKiI8nUrSV1Vg9mhDxIgOGtCOexXpt7DhxuOuhXw/Ei+yZw=="}),s[5]||(s[5]=a(`<p>ä½¿ç”¨semaphore éœ€è¦æ˜ç¡®å®šä¹‰semaphore è¡¨ç¤ºçš„å«ä¹‰</p><div class="hint-container info"><p class="hint-container-title">ç›¸å…³ä¿¡æ¯</p><p>ä¸ºäº†å®Œæˆä¸Šè¿°è¦æ±‚æ„å»ºç¨‹åºï¼Œåº”æŒ‰ç…§çº¿ç¨‹Aã€çº¿ç¨‹Bçš„é¡ºåºè®¿é—®å˜é‡numï¼Œä¸”éœ€è¦çº¿ç¨‹åŒæ­¥</p></div><p>å®ç°ï¼š</p><div class="language-cpp line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="cpp" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">sem_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sem_read;</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">sem_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sem_cal;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> num </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void*</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> read</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">		sem_wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sem_read); </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">		printf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;please input the number:&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">		scanf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">num);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">		sem_post</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sem_cal);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void*</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> cal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sum </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">		sem_wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sem_cal);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		sum </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">+=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> num;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">		printf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;current sum = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%d</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, sum);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">		sem_post</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sem_read);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	printf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;sum = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%d</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, sum);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> argc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">char*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> argv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[])</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	sem_init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sem_read, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	sem_init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sem_cal, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">	pthread_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tid1, tid2;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	pthread_create</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">tid1, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, read, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);	</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	pthread_create</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">tid2, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, cal, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);	</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	pthread_join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(tid1, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	pthread_join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(tid2, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	sem_destroy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sem_read);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	sem_destroy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sem_cal);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><table><thead><tr><th>è¡Œå·</th><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>33</td><td></td><td>èµ„æºï¼šè·å–ç”¨æˆ·è¾“å…¥çš„æ¬¡æ•°ï¼›æ˜¯å¦å¯ä»¥è·å–ç”¨æˆ·è¾“å…¥</td></tr><tr><td>34</td><td></td><td>èµ„æºï¼šæ˜¯å¦å¯ä»¥è¿›è¡Œè®¡ç®—ï¼›æ˜¯å¦å·²è·å–åˆ°ç”¨æˆ·è¾“å…¥</td></tr></tbody></table><p>è®¡ç®—æ€»å’Œçš„çº¿ç¨‹ç›¸å½“äºæ¶ˆè´¹è€…ï¼Œè·å–ç”¨æˆ·è¾“å…¥çš„çº¿ç¨‹ç›¸å½“äºç”Ÿäº§è€…ã€‚åªæœ‰åœ¨ç”Ÿäº§è€…ç”Ÿäº§äº†èµ„æ–™ - è¿™é‡Œæ˜¯numï¼Œæ¶ˆè´¹è€…æ‰å¯ä»¥è¿›è¡Œæ¶ˆè´¹ã€‚è¿™æ ·å°±ç¡®å®šäº†çº¿ç¨‹å¯¹numçš„è®¿é—®é¡ºåºã€‚</p><p>æ•ˆæœï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>ming@ubuntu:/media/sf_share/Network/build$ ./Network</span></span>
<span class="line"><span>please input the number:4</span></span>
<span class="line"><span>current sum = 4</span></span>
<span class="line"><span>please input the number:8</span></span>
<span class="line"><span>current sum = 12</span></span>
<span class="line"><span>please input the number:-4</span></span>
<span class="line"><span>current sum = 8</span></span>
<span class="line"><span>please input the number:-2</span></span>
<span class="line"><span>current sum = 6</span></span>
<span class="line"><span>please input the number:5</span></span>
<span class="line"><span>current sum = 11</span></span>
<span class="line"><span>sum = 11</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><span style="background:#fff88f;">é—®ï¼š</span>ä¸ºä»€ä¹ˆè¦ç”¨ä¸¤ä¸ªsemaphoreæ¥è¿›è¡ŒåŒæ­¥ï¼Ÿä¸€ä¸ªè¡Œä¸è¡Œï¼Ÿ</p><ol><li>semaphore åªåœ¨å€¼ä¸º0æ—¶å¯¹sem_waitï¼ˆï¼‰è¿›è¡Œé˜»å¡ - æ— æ³•è®¿é—®ä¸´ç•ŒåŒºï¼ˆä¿æŠ¤ä¸´ç•ŒåŒºï¼‰ï¼Œåœ¨å¤§äº0æ—¶ä¸ä¼šé˜»å¡ã€‚<br> å¦‚æœcal å’Œ read çº¿ç¨‹éƒ½æ˜¯wait -ã€‹è®¿é—® -ã€‹postï¼Œé‚£ä¹ˆæ— æ³•ç¡®å®šcal å’Œ readçš„æ‰§è¡Œé¡ºåºã€‚</li></ol><ul><li>semaphore åˆå§‹å€¼æ˜¯1ï¼Œå¯èƒ½calå…ˆå¯åŠ¨ï¼Œå¯¼è‡´è®¡ç®—çš„æ¬¡æ•°å°‘äº†1æ¬¡</li></ul><ol start="2"><li>å¦‚æœåœ¨readä¸­åªä½¿ç”¨ post å¢åŠ  semaphoreï¼Œåœ¨calä¸­åªä½¿ç”¨wait å‡å° semaphoreï¼Œæ— æ³•å¯¹ä¸´ç•ŒåŒºè¿›è¡Œä¿æŠ¤</li></ol><div class="language-cpp line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="cpp" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void*</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> read</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â  Â  for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Â  Â  {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Â  Â  Â  Â  printf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;please input the number:&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Â  Â  Â  Â  scanf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">num);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Â  Â  Â  Â  sem_post</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sem_read);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Â  Â  }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â  Â  return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void*</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> cal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â  Â  int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sum </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â  Â  for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Â  Â  {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Â  Â  Â  Â  sem_wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sem_read);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Â  Â  Â  Â  sum </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">+=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> num;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Â  Â  }</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Â  Â  printf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;sum = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%d</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, sum);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â  Â  return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>read å’Œ cal å¯èƒ½åŒæ—¶è®¿é—®num</p><ol start="3"><li>å¦‚æœè¦è®©readä¸€ç›´è¯»å–è¾“å…¥æ»¡5ä¸ªï¼Œè€Œä¸æ˜¯ç­‰calè®¡ç®—ä¸€æ¬¡å†è¯»å–ï¼Œå¯ä»¥ç»“åˆmutexå¯¹ä¸´ç•ŒåŒºä¸Šé”<br> semaphore ç”¨æ¥æ§åˆ¶è®¿é—®é¡ºåºï¼Œmutexç”¨æ¥ä¿æŠ¤ä¸´ç•ŒåŒº</li></ol>`,15))])}const g=l(k,[["render",d]]),c=JSON.parse('{"path":"/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/18.4%20%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5.html","title":"18.4 çº¿ç¨‹åŒæ­¥","lang":"zh-CN","frontmatter":{"category":"ç½‘ç»œç¼–ç¨‹","description":"18.4 çº¿ç¨‹åŒæ­¥ ç›¸å…³ä¿¡æ¯ çº¿ç¨‹åŒæ­¥ç”¨äºè§£å†³çº¿ç¨‹è®¿é—®é¡ºåºå¼•å‘çš„é—®é¢˜ã€‚ äº’æ–¥é‡ Mutual Exclusion ç›¸äº’æ’æ–¥ ä¹Ÿå«åšäº’æ–¥é” äº’æ–¥é”çš„ä½œç”¨ï¼šä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè®¿é—®åŒä¸€å—ä¸´ç•ŒåŒºï¼ˆé€ æˆå¼‚å¸¸çš„ä»£ç ï¼‰ ä½¿ç”¨mutexçš„é€»è¾‘ï¼š åœ¨è®¿é—®ä¸´ç•ŒåŒºå‰è¿›è¡Œlockï¼Œè®¿é—®ç»“æŸåè¿›è¡Œunlockã€‚ å¦‚æœçº¿ç¨‹0è®¿é—®åæ²¡æœ‰unlockï¼Œé‚£ä¹ˆçº¿ç¨‹1ä¼šä¸€ç›´ç­‰å¾…è§£...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"18.4 çº¿ç¨‹åŒæ­¥\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2026-01-28T13:23:03.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"mingStudent\\"}]}"],["meta",{"property":"og:url","content":"https://guzhoutingxue.github.io/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/18.4%20%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5.html"}],["meta",{"property":"og:title","content":"18.4 çº¿ç¨‹åŒæ­¥"}],["meta",{"property":"og:description","content":"18.4 çº¿ç¨‹åŒæ­¥ ç›¸å…³ä¿¡æ¯ çº¿ç¨‹åŒæ­¥ç”¨äºè§£å†³çº¿ç¨‹è®¿é—®é¡ºåºå¼•å‘çš„é—®é¢˜ã€‚ äº’æ–¥é‡ Mutual Exclusion ç›¸äº’æ’æ–¥ ä¹Ÿå«åšäº’æ–¥é” äº’æ–¥é”çš„ä½œç”¨ï¼šä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè®¿é—®åŒä¸€å—ä¸´ç•ŒåŒºï¼ˆé€ æˆå¼‚å¸¸çš„ä»£ç ï¼‰ ä½¿ç”¨mutexçš„é€»è¾‘ï¼š åœ¨è®¿é—®ä¸´ç•ŒåŒºå‰è¿›è¡Œlockï¼Œè®¿é—®ç»“æŸåè¿›è¡Œunlockã€‚ å¦‚æœçº¿ç¨‹0è®¿é—®åæ²¡æœ‰unlockï¼Œé‚£ä¹ˆçº¿ç¨‹1ä¼šä¸€ç›´ç­‰å¾…è§£..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-01-28T13:23:03.000Z"}],["meta",{"property":"article:modified_time","content":"2026-01-28T13:23:03.000Z"}]]},"git":{"createdTime":1769606583000,"updatedTime":1769606583000,"contributors":[{"name":"guZhouTingXue","username":"guZhouTingXue","email":"2422173022@qq.com","commits":1,"url":"https://github.com/guZhouTingXue"}]},"readingTime":{"minutes":9.07,"words":2722},"filePathRelative":"ç½‘ç»œç¼–ç¨‹/18.4 çº¿ç¨‹åŒæ­¥.md","excerpt":"","autoDesc":true}');export{g as comp,c as data};
