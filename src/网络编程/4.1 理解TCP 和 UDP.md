---
category: 网络编程
---
# 4.1 理解TCP 和 UDP

## 协议
协议的组成要素：
语法：数据与控制信息的结构或格式。如何解析
语义：需要发出何种控制信息，完成何种动作以及做出何种响应。如何操控。
同步：事件实现的顺序。操作流程，保证双方状态一致。

## 层次划分
划分层次后网络传输文件的过程：
![](./attachments/4.1%20理解TCP%20和%20UDP.webp)

本来想用mermaid 的flowchart 画的，但是不知道怎么分列，改用whiteboard 绘制
发送方：文件传输模块将文件或命令给到通信服务模块，通信服务模块再通过接入模块发送。
接收方：接入模块收到数据后向上递交给通信服务模块，通信服务模块保证数据有效（顺序、内容正确），然后再递交给文件传送模块。最后由文件模块解析数据或响应命令。

| 模块     | 功能                  |
| ------ | ------------------- |
| 文件传输模块 | 获取指定文件、发送文件、删除文件。。。 |
| 通信服务模块 | 建立通讯、断开通讯、通信数据有效。。。 |
| 网络接入模块 | 建立物理连接通道，收发数据       |

分层后相同层级之间的模块是对等的，进行处理时好像它们之间是在直接通话，而不是经过了底层模块的传递。
各层的功能、目的明确。文件模块只处理文件相关的内容，至于文件数据的传输则由通信模块处理。


### 标准体系结构
::: tabs
@tab  OSI

| 层级  | 名称    | 功能                  | 信息分组名称        | 协议/服务                | 说明                                                                       |
| --- | ----- | ------------------- | ------------- | -------------------- | ------------------------------------------------------------------------ |
| 7   | 应用层   | 网络应用程序及它们的协议存留的地方   | 报文            | HTTP, SMTP, FTP, DNS |                                                                          |
| 6   | 表示层   | 使通信的应用程序能够解释交换数据的含义 |               |                      |                                                                          |
| 5   | 会话层   | 提供数据交换的定界和同步功能      |               |                      |                                                                          |
| 4   | 运输层   | 传输应用层报文             | 报文段           | TCP，UDP              |                                                                          |
| 3   | 网络层   | 在主机之间传递数据。路由选择      | 数据报（包）        | IP                   | 面向消息，不可靠                                                                 |
| 2   | 数据链路层 | 在相邻网络元素（节点）间移动帧     | 帧（frame）      | 以太网、WiFi、ARP         | 一个数据报可能被沿途不同链路上的不同链路层协议处理。WiFi-》以太网-》other。 或者主机包含多种链路，网络层需要处理不同链路过来的数据报 |
| 1   | 物理层   | 在相邻节点间移动bit         | 比特流（bit-flow） | 以太网：双绞铜线、同轴电缆、光纤     |                                                                          |

@tab TCP/IP 四层协议

| 层级  | 名称           |
| --- | ------------ |
| 4   | 应用层          |
| 3   | 运输层          |
| 2   | 网际（络）层 （IP层） |
| 1   | 网络接口层        |

@tab 五层协议

| 层级  | 名称    |
| --- | ----- |
| 5   | 应用层   |
| 4   | 运输层   |
| 3   | 网络层   |
| 2   | 数据链路层 |
| 1   | 物理层   |

:::
